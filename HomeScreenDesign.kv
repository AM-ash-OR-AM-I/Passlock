#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import Gradient kivy_gradient.Gradient
#:import Toolbar Toolbar.Toolbar
#:set bg_color_dark get_color_from_hex('262626')
#:import List List.List
#:import sm kivy.uix.screenmanager

<CheckboxLabel>
	adaptive_size:True
	size_hint_x:.8
	pos_hint: {'center_x': .5}
	spacing:'12dp'
	radius:dp(5),dp(5)
	text:''
	MDCheckbox:
		size_hint: None, None
		size: "36dp", "36dp"
		selected_color:app.theme_cls.primary_light
		pos_hint: {'center_x': .5}
	MDLabel:
		text: root.text
<Manual@MDBoxLayout+MDTabsBase>
	orientation:'vertical'
	pos_hint:{'top':1}
	adaptive_height:True
	spacing:'50sp'
	padding:(0,dp(80),0,0)
	CardTextField:
		id:email_field
		pos_hint:{'center_x':.5}
		icon_font_size:icon_size
		thickness:dp(1) if platform == 'android' else dp(1.4)
		icon_color:app.theme_cls.primary_color
		label_name:'Name of Password'
		hint_text:'e.g. username@gmail.com'
		inactive_color:app.theme_cls.primary_light[:-1]+[.6]

	CardTextField:
		id:password_field
		pos_hint:{'center_x':.5}
		icon_font_size:icon_size
		icon_color:app.theme_cls.primary_color
		thickness:dp(1) if platform == 'android' else dp(1.4)
		label_name:'Password'
		hint_text:'Enter the password'
		inactive_color:app.theme_cls.primary_light[:-1]+[.6]
		icon_right_action:['eye-off-outline']
	RoundButton:
		adaptive_height:True
		text:'CREATE'
		font_name:'RobotoMedium'
		size_hint_x:.8
		font_size:'18sp'
		pos_hint:{'center_x':.5}

<Auto@MDBoxLayout+MDTabsBase>
	orientation:'vertical'
	pos_hint:{'top':1}
	adaptive_height:True
	spacing:'25sp'
	padding:(0,dp(75),0,0)
	MDBoxLayout:
		orientation:'vertical'
		adaptive_height:True
		spacing:'50sp'
		CardTextField:
			id:email_field
			pos_hint:{'center_x':.5}
			icon_font_size:icon_size
			thickness:dp(1) if platform == 'android' else dp(1.4)
			icon_color:app.theme_cls.primary_color
			label_name:'Name of Password'
			hint_text:'e.g. username@gmail.com'
			inactive_color:app.theme_cls.primary_light[:-1]+[.6]
		CardTextField:
			id:password_field
			pos_hint:{'center_x':.5}
			icon_font_size:icon_size
			thickness:dp(1) if platform == 'android' else dp(1.4)
			icon_color:app.theme_cls.primary_color
			label_name:'Password'
			text:'adHKf@%123*n'
			icon_right_action:[['content-copy'],['reload']]

			inactive_color:app.theme_cls.primary_light[:-1]+[.6]

	MDBoxLayout:
		orientation:'vertical'
		adaptive_height:True
		center_x:password_field.center_x
		CheckboxLabel:
			text:"Use uppercase letters (A, B, C,..)"
		CheckboxLabel:
			text:"Use lowercase letters (a, b, c,..)"
		CheckboxLabel:
			text:"Use numbers (1, 2, 3,..)"
		CheckboxLabel:
			text:"Use Special Characters ($, #, % .)"


	RoundButton:

		adaptive_height:True
		text:'GENERATE'
		font_name:'RobotoMedium'
		size_hint_x:.8
		font_size:'18sp'
		pos_hint:{'center_x':.5}

<RoundButton>
	canvas:
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius:dp(20),dp(20)
			texture: Gradient.horizontal([1,1,1,0], [1,1,1,.25])

<DarkAnimation@Widget>
	rad : 80
	set_color: [0,0,0,1]
	parent_rad: 20
	opacity:root.opacity
	canvas:
		Color:
			rgba: app.theme_cls.opposite_bg_normal
		Ellipse:
			size: 2*self.rad,2*self.rad
			pos: (self.x - self.rad , self.y - self.rad)

<RoundedList>
	height:'60dp'
	ripple_alpha:.3
	radius:dp(15),dp(15),dp(15),dp(15)

<HomeScreen>
	md_bg_color: app.theme_cls.bg_normal
	MDBoxLayout:
		orientation:'vertical'
		pos_hint:{'top':1}
		padding:(0,dp(0),0,0)
		Toolbar:
			id: toolbar
			title:'Passlock'
			height:'56dp'
			padding:searchbar.x,dp(8),window.width-(searchbar.x+searchbar.width),dp(5)
			md_bg_color:app.primary_accent
			elevation:0
			icon_color:app.theme_cls.primary_color
			right_action_items:
				[['theme-light-dark',lambda x: app.toggle_mode(x)],
				["cog",lambda x: exec("app.change_screen('SettingScreen')")]]

		MDBoxLayout:
			adaptive_height:True
			orientation:'vertical'
			md_bg_color:toolbar.md_bg_color
			pos_hint:{'center_x':.5}
			padding:0,dp(0),0,dp(11)
			CardTextField:
				id: searchbar
				height:'50dp'
				set_elevation:10
				size_hint_x:.85
				pos_hint:{'center_x':.5}
				radius: '20dp'
				on_focus:
					tab_manager.current = 'FindScreen'
				icon_left_action:["magnify" if tab_manager.current == 'CreateScreen' else 'arrow-left',lambda x: exec("tab_manager.current='CreateScreen'")]
				hint_text:'Search passwords'
				icon_color:app.theme_cls.primary_color
				label_name:""
				inactive_color:app.theme_cls.primary_light[:-1]+[.6]
		ScreenManager:
			id: tab_manager
			transition: sm.NoTransition()
			CreateScreen:
				id: create
			FindScreen:
				id: find
				x_pad: searchbar.x


<CreateScreen@MDScreen>
	name:'CreateScreen'
	on_enter:app.animation_behavior(auto if tab.current else manual)
	on_leave:exec("auto.opacity=0") if tab.current else exec("manual.opacity=0")
	FloatLayout:
		DarkAnimation:
			id: circle_mode
			opacity:0
			rad: 10
			pos: window.width, window.height-dp(112)
			halign:'left'
	MDTabs:
		id:tab
		current:False
		on_tab_switch: self.current = not self.current
		default_tab:1
		indicator_color:app.theme_cls.primary_color #if app.theme_cls.theme_style=='Dark' else [1,1,1,1]
		anim_duration:.2
		background_color:app.primary_accent
		tab_indicator_anim:True
		tab_indicator_height:'3dp'
#        allow_stretch:False
		tab_hint_x:True
		show_anim:True
		text_color_active:app.theme_cls.primary_color #if app.theme_cls.theme_style=='Dark' else [1,1,1,1]
		text_color_normal:[.75,.75,.75,1]
		Manual:
			id: manual
			title: "[b]MANUAL"
		Auto:
			id: auto
			title: "[b]AUTO"

<FindScreen@MDScreen>
	name:'FindScreen'
	x_pad: 0
	enter:0
	on_enter:
		app.animation_behavior(find_screen);self.enter=1
	on_leave:
		find_screen.opacity=0
	MDBoxLayout:
		id: find_screen
		opacity:0
		orientation:'vertical'
		pos_hint:{'top':1}

		RecycleView:
			id: scroll
			pos_hint:{'center_x':.5}
			MDBoxLayout:
				id: box
				pos_hint:{'center_y':.5,'center_x':.5}
				adaptive_height:True
				orientation:'vertical'
				padding:root.x_pad,dp(10),root.x_pad,0
				md_bg_color:app.primary_accent
				List:
					primary_text:'Pass1'
				List:
					primary_text:'Pass2'
				List:
					primary_text:'Pass3'
				List:
					primary_text:'Pass1'
				List:
					primary_text:'Pass2'
				List:
					primary_text:'Pass3'
				List:
					primary_text:'Pass1'
				List:
					primary_text:'Pass2'
				List:
					primary_text:'Pass3'
				List:
					primary_text:'Pass1'
				List:
					primary_text:'Pass2'
				List:
					primary_text:'Pass3'
				List:
					primary_text:'Pass1'
				List:
					primary_text:'Pass2'
				List:
					primary_text:'Pass3'




#HomeScreen:
