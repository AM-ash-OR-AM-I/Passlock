#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import Gradient kivy_gradient.Gradient
#:import Toolbar libs.modules.Toolbar.Toolbar
#:import List libs.modules.List.List
#:import sm kivy.uix.screenmanager

<MyLabel@MDLabel>
	theme_text_color:"Custom"
	text_color: app.text_color

<Manual@MDBoxLayout+MDTabsBase>
	orientation:'vertical'
	pos_hint:{'top':1}
	adaptive_height:True
	padding:(0,dp(80),0,0)
	spacing:"25sp"
	MDBoxLayout:
		spacing:'50sp'
		orientation:'vertical'
		adaptive_height:True
		BorderCard:
			id:name_field
			pos_hint:{'center_x':.5}
			label_name:'Name of Password'
			hint_text:'e.g. username@gmail.com'
			
		BorderCard:
			id:password_field
			pos_hint:{'center_x':.5}
			label_name:'Password'
			hint_text:'Enter the password'
			icon_right_action:['eye-off-outline']

	RoundButton:
		id: add
		adaptive_height:True
		text:'CREATE'
		font_name:'RobotoMedium'
		size_hint_x:.8
		font_size:'18sp'
		pos_hint:{'center_x':.5}
		on_release:
			app.HomeScreen.create_password(name_field.text, password_field.text)

<Auto@ScrollView+MDTabsBase>
    always_overscroll: False
	MDBoxLayout:
		orientation:'vertical'
		pos_hint:{'top':1}
		adaptive_height:True
		spacing:'25sp'
		padding:(0,dp(75),0,dp(20))
		MDBoxLayout:
			orientation:'vertical'
			adaptive_height:True
			spacing:'50sp'
			BorderCard:
				id:email_field
				pos_hint:{'center_x':.5}
				text_col:True
				label_name:'Name of Password'
				hint_text:'e.g. username@gmail.com'
			BorderCard:
				id:password_field
				pos_hint:{'center_x':.5}
				text_col:True
				label_name:'Password'
				text:'adHKf@%123*n'
				icon_right_action:[['content-copy'],['reload']]

		RoundButton:
			id: generate
			adaptive_height:True
			text:'GENERATE'
			font_name:'RobotoMedium'
			size_hint_x:.8
			font_size:'18sp'
			pos_hint:{'center_x':.5}

		MDBoxLayout:
			orientation:'vertical'
			adaptive_height:True
			center_x:password_field.center_x
			CheckboxLabel:
				text:"Use uppercase letters (A, B, C,..)"
			CheckboxLabel:
				text:"Use lowercase letters (a, b, c,..)"
			CheckboxLabel:
				text:"Use numbers (1, 2, 3,..)"
			CheckboxLabel:
				text:"Use Special Characters ($, #, % .)"

<DarkAnimation@Widget>
	rad : 80
	set_color: [0,0,0,1]
	parent_rad: 20
	opacity:root.opacity
	canvas:
		Color:
			rgba: app.theme_cls.opposite_bg_normal
		Ellipse:
			size: 2*self.rad,2*self.rad
			pos: (self.x - self.rad , self.y - self.rad)

<HomeScreen>
	md_bg_color: app.bg_color
	MDBoxLayout:
		orientation:'vertical'
		id: box
		Toolbar:
			id: toolbar
			title:'Passlock'
			height:'56dp'
			padding:searchbar.x,dp(8),window.width-(searchbar.x+searchbar.width),dp(5)
			md_bg_color:app.primary_accent
			elevation:0
			icon_color:app.theme_cls.primary_color
			right_action_items:
				[['theme-light-dark',lambda x: app.toggle_mode(x)],
				["cog",lambda x: exec("app.root.load_screen('SettingsScreen')")]]

		MDBoxLayout:
			adaptive_height:True
			orientation:'vertical'
			md_bg_color:toolbar.md_bg_color
			pos_hint:{'center_x':.5}
			padding:0,dp(0),0,dp(11)
			CardTextField:
				id: searchbar
				height:'50dp'
				set_elevation:10
				size_hint_x:.85
				pos_hint:{'center_x':.5}
				radius: '15dp'
				on_text:
				    find.find_password(self.text)
				on_focus:
					tab_manager.current = 'FindScreen'
				icon_left_action:["magnify" if tab_manager.current == 'CreateScreen' else 'arrow-left',lambda x: exec("tab_manager.current='CreateScreen';self.text =''")]
				hint_text:'Search passwords'
				hint_text_color:app.secondary_text_color
				icon_color:app.theme_cls.primary_color
				label_name:""
				inactive_color:[.9,.9,.9,.1]
				dark_bg_hex: "343434"
		ScreenManager:
			id: tab_manager
			transition: sm.NoTransition()
			CreateScreen:
				id: create
			FindScreen:
				id: find
				x_pad: searchbar.x


<CreateScreen@MDScreen>
	name:'CreateScreen'
	FloatLayout:
		DarkAnimation:
			id: dark_animation
			opacity:0
			rad: 10
			pos: window.width, window.height-dp(112)
			halign:'left'
	MDTabs:
		id:tab
#		default_tab:1
		indicator_color:app.theme_cls.primary_color
		anim_duration:.2
		background_color:app.primary_accent
		tab_indicator_anim:True
		tab_indicator_height:'3dp'
		tab_hint_x:True
		set_elevation:5
		show_anim:True
		text_color_active:app.theme_cls.primary_color
		text_color_normal:[.75,.75,.75,1]
		Manual:
			id: manual
			title: "[b]MANUAL"
		Auto:
			id: auto
			title: "[b]AUTO"

<RecycleList@LayoutSelectionBehavior+RecycleBoxLayout>

<FindScreen>
	name:'FindScreen'
	x_pad: 0
	enter:0
	md_bg_color: app.primary_accent

    RecycleView:
        id: scroll
        key_viewclass: "class"
        data: root.rv_data
        RecycleList:
            id: box
			padding: "15dp"
            default_size: None, dp(56)
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: "vertical"
